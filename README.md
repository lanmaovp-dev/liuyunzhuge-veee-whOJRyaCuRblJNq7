[åˆé›† \- æœºå™¨å­¦ä¹ (6\)](https://github.com)[1\.ä»é›¶å¼€å§‹å­¦æœºå™¨å­¦ä¹ â€”â€”ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ 09\-24](https://github.com/guoxiaoyu/p/18412875)[2\.ä»é›¶å¼€å§‹å­¦æœºå™¨å­¦ä¹ â€”â€”äº†è§£å›å½’09\-25](https://github.com/guoxiaoyu/p/18413894)[3\.ä»é›¶å¼€å§‹å­¦æœºå™¨å­¦ä¹ â€”â€”å‡†å¤‡å’Œå¯è§†åŒ–æ•°æ®09\-27](https://github.com/guoxiaoyu/p/18419035):[milouåŠ é€Ÿå™¨](https://xinminxuehui.org)[4\.ä»é›¶å¼€å§‹å­¦æœºå™¨å­¦ä¹ â€”â€”çº¿æ€§å’Œå¤šé¡¹å¼å›å½’09\-29](https://github.com/guoxiaoyu/p/18421693)[5\.ä»é›¶å¼€å§‹å­¦æœºå™¨å­¦ä¹ â€”â€”é€»è¾‘å›å½’09\-30](https://github.com/guoxiaoyu/p/18429831)6\.ä»é›¶å¼€å§‹å­¦æœºå™¨å­¦ä¹ â€”â€”ç½‘ç»œåº”ç”¨10\-06æ”¶èµ·
é¦–å…ˆç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å­¦ä¹ åœ°å€ï¼š[https://cloudstudio.net/columns](https://github.com)


ä»Šå¤©ï¼Œæˆ‘ä»¬çš„ä¸»è¦ä»»åŠ¡æ˜¯æŒ‰ç…§æ—¢å®šçš„æµç¨‹å†æ¬¡è¿è¡Œæ¨¡å‹ï¼Œå¹¶å°†å…¶æˆåŠŸåŠ è½½åˆ° Web åº”ç”¨ç¨‹åºä¸­ï¼Œä»¥ä¾¿é€šè¿‡ Web ç•Œé¢è¿›è¡Œè°ƒç”¨ã€‚æœ€ç»ˆç”Ÿæˆçš„æ¨¡å‹å°†èƒ½å¤ŸåŸºäº UFO ç›®å‡»äº‹ä»¶çš„æ•°æ®å’Œç»çº¬åº¦ä¿¡æ¯ï¼Œæ¨æ–­å‡ºäº‹ä»¶å‘ç”Ÿçš„åŸå¸‚åœ°å€ã€‚å°½ç®¡ç»çº¬åº¦ä¿¡æ¯ä¼¼ä¹å·²ç»è¶³å¤Ÿï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯éœ€è¦æ¨¡å‹è¿›è¡Œé¢„æµ‹ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç»ƒä¹ ç›®çš„ã€‚å¸Œæœ›é€šè¿‡è¿™ä¸ªè¿‡ç¨‹ï¼Œä½ èƒ½è¿›ä¸€æ­¥ç†è§£æœºå™¨å­¦ä¹ æ¨¡å‹åœ¨ Web åº”ç”¨ä¸­çš„åº”ç”¨ä¸æ•´åˆã€‚


# çŸ¥è¯†å›é¡¾


## å·¥å…·


å¯¹äºæ­¤ä»»åŠ¡ï¼Œä½ éœ€è¦ä¸¤ä¸ªå·¥å…·ï¼šFlask å’Œ Pickleï¼Œå®ƒä»¬éƒ½åœ¨ Python ä¸Šè¿è¡Œã€‚


**Flask** æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ web åº”ç”¨æ¡†æ¶ï¼Œé€‚ç”¨äºæ„å»ºç®€å•çš„ web åº”ç”¨å’Œ RESTful APIã€‚å®ƒéµå¾ª WSGIï¼ˆWeb Server Gateway Interfaceï¼‰æ ‡å‡†ï¼Œæ”¯æŒå¤šç§æ‰©å±•ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š


* **ç®€å•æ˜“ç”¨**ï¼šFlask çš„æ ¸å¿ƒéå¸¸ç®€å•ï¼Œæ˜“äºä¸Šæ‰‹ï¼Œé€‚åˆåˆå­¦è€…ã€‚
* **çµæ´»æ€§**ï¼šå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©å’Œæ·»åŠ æ‰©å±•ï¼Œä½¿å…¶å…·æœ‰æ›´å¼ºçš„åŠŸèƒ½ã€‚
* **è·¯ç”±ç³»ç»Ÿ**ï¼šFlask æä¾›äº†çµæ´»çš„ URL è·¯ç”±æœºåˆ¶ï¼Œæ–¹ä¾¿ç®¡ç†ä¸åŒçš„é¡µé¢å’Œè¯·æ±‚ã€‚
* **æ¨¡æ¿å¼•æ“**ï¼šé›†æˆäº† Jinja2 æ¨¡æ¿å¼•æ“ï¼Œå¯ä»¥è½»æ¾ç”ŸæˆåŠ¨æ€ HTML é¡µé¢ã€‚
* **æ”¯æŒ RESTful API**ï¼šéå¸¸é€‚åˆæ„å»º RESTful æœåŠ¡ã€‚


**Pickle** æ˜¯ Python çš„ä¸€ä¸ªå†…ç½®æ¨¡å—ï¼Œç”¨äºå¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚åºåˆ—åŒ–æ˜¯å°† Python å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµçš„è¿‡ç¨‹ï¼Œè€Œååºåˆ—åŒ–åˆ™æ˜¯å°†å­—èŠ‚æµè¿˜åŸä¸º Python å¯¹è±¡ã€‚å®ƒçš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š


* **ç®€å•æ–¹ä¾¿**ï¼šä½¿ç”¨ç®€å•ï¼Œå¯ä»¥è½»æ¾åœ°ä¿å­˜å’ŒåŠ è½½ Python å¯¹è±¡ã€‚
* **æ”¯æŒå¤šç§å¯¹è±¡**ï¼šå¯ä»¥åºåˆ—åŒ–å¤§å¤šæ•° Python æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ç±»ã€‚
* **æŒä¹…åŒ–æ•°æ®**ï¼šé€‚åˆå°†æ•°æ®å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚


**æ³¨æ„**ï¼šPickle å¯¹å®‰å…¨æ€§æœ‰ä¸€å®šçš„éšæ‚£ï¼Œå› ä¸ºååºåˆ—åŒ–ä¸å¯ä¿¡çš„æ•°æ®å¯èƒ½å¯¼è‡´ä»£ç æ‰§è¡Œæ¼æ´ã€‚


## æ¸…æ´—æ•°æ®


é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹æˆ‘ä»¬çš„æ•°æ®é›†ï¼Œçœ‹çœ‹å®ƒçš„å…·ä½“ç»“æ„å’Œå†…å®¹ã€‚è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼Œå› ä¸ºæ•°æ®çš„è´¨é‡å’Œç‰¹å¾å°†ç›´æ¥å½±å“åˆ°æ¨¡å‹çš„æ€§èƒ½å’Œé¢„æµ‹ç»“æœã€‚



```
import pandas as pd
import numpy as np

ufos = pd.read_csv('./data/ufos.csv')
ufos.head()

```

![image](https://img2024.cnblogs.com/blog/1423484/202409/1423484-20240928172252565-150597068.png)


å› æ­¤ï¼Œæ ¹æ®æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æå–ä¸ä¹‹ç›¸å…³çš„å‘é‡å­—æ®µæ•°æ®ã€‚è¿™äº›å­—æ®µåŒ…æ‹¬ï¼šåŸå¸‚åç§°ã€ç»çº¬åº¦åæ ‡ä»¥åŠç›®å‡»æ—¶é•¿ã€‚è¿™äº›ä¿¡æ¯å°†ä¸ºæˆ‘ä»¬åç»­çš„åˆ†æå’Œå»ºæ¨¡æä¾›é‡è¦çš„è¾“å…¥ç‰¹å¾ï¼Œå¸®åŠ©æˆ‘ä»¬å‡†ç¡®åœ°æ¨æ–­ UFO ç›®å‡»äº‹ä»¶å‘ç”Ÿçš„åŸå¸‚ã€‚



```
ufos = pd.DataFrame({'Seconds': ufos['duration (seconds)'], 'Country': ufos['country'],'Latitude': ufos['latitude'],'Longitude': ufos['longitude']})

ufos.Country.unique()
ufos.dropna(inplace=True)
ufos = ufos[(ufos['Seconds'] >= 1) & (ufos['Seconds'] <= 60)]
ufos.info()

```

åœ¨å®Œæˆè¿™ä¸€ç³»åˆ—çš„æ•°æ®æ¸…æ´—å’Œç­›é€‰åï¼Œæˆ‘ä»¬çš„æ•°æ®é›†å°†ä»…åŒ…å«æˆ‘ä»¬æ‰€éœ€çš„ç›¸å…³å­—æ®µï¼Œç¡®ä¿å…¶ç²¾ç®€è€Œé«˜æ•ˆã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯¹ç›®å‡»æ—¶é•¿è¿›è¡Œäº†ç‰¹åˆ«çš„è¿‡æ»¤ï¼Œä»¥ç¡®ä¿è¯¥ç‰¹å¾çš„æœ‰æ•ˆæ€§å’Œä¸€è‡´æ€§ã€‚


å› ä¸ºæˆ‘ä»¬äº†è§£åˆ°ï¼Œæ¨¡å‹å¯¹æ•°æ®çš„æ•æ„Ÿæ€§ä¼šå½±å“å…¶é¢„æµ‹ç»“æœã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†æ–‡æœ¬å­—æ®µè½¬æ¢ä¸ºé€‚åˆæ¨¡å‹å¤„ç†çš„æ•°å€¼æ•°æ®æ ¼å¼ã€‚è¿™ä¸€è½¬æ¢è¿‡ç¨‹å°†ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿç†è§£å’Œåˆ©ç”¨è¿™äº›æ–‡æœ¬ä¿¡æ¯ï¼Œä»è€Œæå‡é¢„æµ‹èƒ½åŠ›ã€‚



```
from sklearn.preprocessing import LabelEncoder
ufos['Country'] = LabelEncoder().fit_transform(ufos['Country'])
ufos.head()

```

ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸå®Œæˆäº†æ•°æ®çš„æ¸…ç†å’Œé¢„å¤„ç†ï¼Œç¡®ä¿æˆ‘ä»¬çš„æ•°æ®é›†å…·å¤‡è‰¯å¥½çš„è´¨é‡å’Œä¸€è‡´æ€§ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›å…¥æ¨¡å‹è®­ç»ƒçš„é˜¶æ®µã€‚è€ƒè™‘åˆ°æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯é¢„æµ‹åŸå¸‚ï¼Œè€ŒåŸå¸‚åç§°æ˜¯ä¸€ä¸ªæœ‰é™ä¸”å›ºå®šçš„ç±»åˆ«ï¼Œé€»è¾‘å›å½’æ¨¡å‹å°†æ˜¯ä¸€ä¸ªç†æƒ³çš„é€‰æ‹©ã€‚


## å»ºç«‹æ¨¡å‹


ç°åœ¨ï¼Œæˆ‘ä»¬å°†å¼€å§‹å‡†å¤‡è®­ç»ƒæ¨¡å‹çš„å…³é”®æ­¥éª¤ï¼Œå³å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒç»„å’Œæµ‹è¯•ç»„ã€‚



```
from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score, classification_report 
from sklearn.linear_model import LogisticRegression

Selected_features = ['Seconds','Latitude','Longitude']

X = ufos[Selected_features]
y = ufos['Country']

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=0)


model = LogisticRegression()
model.fit(X_train, y_train)
predictions = model.predict(X_test)

print(classification_report(y_test, predictions))
print('Predicted labels: ', predictions)
print('Accuracy: ', accuracy_score(y_test, predictions))

```

è¿”å›å¦‚ä¸‹ï¼š



```
              precision    recall  f1-score   support

           0       1.00      1.00      1.00        41
           1       0.83      0.23      0.36       250
           2       1.00      1.00      1.00         8
           3       1.00      1.00      1.00       131
           4       0.96      1.00      0.98      4743

    accuracy                           0.96      5173
   macro avg       0.96      0.85      0.87      5173
weighted avg       0.96      0.96      0.95      5173

Predicted labels:  [4 4 4 ... 3 4 4]
Accuracy:  0.9605644693601392

```

æ¨¡å‹çš„å‡†ç¡®ç‡ç›¸å½“ä¸é”™ï¼Œçº¦ä¸º95%ã€‚è¿™ä¸€ç»“æœå¹¶ä¸ä»¤äººæ„å¤–ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç‰¹å¾â€”â€”å›½å®¶ï¼ˆCountryï¼‰ä»¥åŠç»çº¬åº¦ï¼ˆLatitude/Longitudeï¼‰ä¿¡æ¯ä¹‹é—´ç¡®å®å­˜åœ¨æ˜¾è‘—çš„ç›¸å…³æ€§ã€‚


æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸€è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œæ‰“åŒ…ï¼Œä»¥ä¾¿å°†å…¶é›†æˆåˆ°æˆ‘ä»¬çš„Webåº”ç”¨ç¨‹åºä¸­ã€‚è¿™æ ·ï¼Œç”¨æˆ·å°±èƒ½å¤Ÿé€šè¿‡ç½‘é¡µè½»æ¾è°ƒç”¨æ¨¡å‹è¿›è¡ŒåŸå¸‚é¢„æµ‹ï¼Œäº«å—æµç•…çš„äº¤äº’ä½“éªŒã€‚


## æ‰“åŒ…æ¨¡å‹


æˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨pickleåº“è¿™ä¸€ä¾¿æ·çš„ä¾èµ–ï¼Œå°†è®­ç»ƒå¥½çš„æ¨¡å‹åºåˆ—åŒ–å¹¶å†™å…¥æ–‡ä»¶ã€‚



```
import pickle
model_filename = 'ufo-model.pkl'
pickle.dump(model, open(model_filename,'wb'))

model = pickle.load(open('ufo-model.pkl','rb'))

```

# æ„å»ºWEB


ç°åœ¨ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯é€šè¿‡Flaskåº”ç”¨ç¨‹åºæ¥è°ƒç”¨å·²è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œå¹¶å°†é¢„æµ‹ç»“æœä»¥æ›´åŠ ç¾è§‚å’Œç”¨æˆ·å‹å¥½çš„æ–¹å¼å±•ç¤ºåœ¨Webé¡µé¢ä¸Šã€‚Flaskä½œä¸ºä¸€ä¸ªè½»é‡çº§çš„Webæ¡†æ¶ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ„å»ºWebåº”ç”¨ï¼Œè®©ç”¨æˆ·é€šè¿‡ç›´è§‚çš„ç•Œé¢ä¸æ¨¡å‹è¿›è¡Œäº¤äº’ã€‚



```
web-app/
  static/
    css/
  templates/
notebook.ipynb
ufo-model.pkl
app.py
requirements.txt

```

è¿™æ˜¯æˆ‘ä»¬éœ€è¦æ–°å»ºçš„ç›®å½•ç»“æ„ï¼Œè¯·åŠ¡å¿…ä¸¥æ ¼éµå¾ªè¿™ä¸€å¸ƒå±€ï¼Œå› ä¸ºä¸æŒ‰æ­¤ç»“æ„ç»„ç»‡æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºåœ¨è¿è¡Œæ—¶å‡ºç°é”™è¯¯ã€‚


requirements.txtä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼š



```
scikit-learn
pandas
numpy
flask

```

ç„¶åå®‰è£…ç›¸å…³ä¾èµ–



> pip install \-r requirements.txt


å…¶ä½™çš„CSSå’ŒHTMLä»£ç è¯·å‰å¾€å­¦ä¹ ä¸­å¿ƒè‡ªè¡Œå¤åˆ¶å’Œå‚è€ƒï¼Œè¿™é‡Œä¸å†ä¸€ä¸€åˆ—ä¸¾ã€‚


åœ¨app.pyä¸­æ·»åŠ :



```
import numpy as np
from flask import Flask, request, render_template
import pickle

app = Flask(__name__)

model = pickle.load(open("./ufo-model.pkl", "rb"))


@app.route("/")
def home():
    return render_template("index.html")


@app.route("/predict", methods=["POST"])
def predict():

    int_features = [int(x) for x in request.form.values()]
    final_features = [np.array(int_features)]
    prediction = model.predict(final_features)

    output = prediction[0]

    countries = ["Australia", "Canada", "Germany", "UK", "US"]

    return render_template(
        "index.html", prediction_text="Likely country: {}".format(countries[output])
    )


if __name__ == "__main__":
    app.run(debug=True)

```

è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªç®€å•çš„ web åº”ç”¨ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥ç‰¹å¾æ•°æ®å¹¶æ ¹æ®åŠ è½½çš„æœºå™¨å­¦ä¹ æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€‚é¢„æµ‹ç»“æœä¼šè¢«æ¸²æŸ“åˆ°åŒä¸€ä¸ªé¡µé¢ä¸Šæ˜¾ç¤ºç»™ç”¨æˆ·ã€‚é€šè¿‡ Flask çš„è·¯ç”±ç³»ç»Ÿï¼Œå¯ä»¥æ–¹ä¾¿åœ°å¤„ç†ç”¨æˆ·è¯·æ±‚å’Œå“åº”ã€‚


ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è¾“å…¥ç‰¹å¾æ•°æ®â€œ50, 44, \-12â€æ—¶ï¼Œåº”ç”¨å°†è°ƒç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œè®¡ç®—ï¼Œå¹¶åœ¨é¡µé¢ä¸Šå±•ç¤ºé¢„æµ‹ç»“æœï¼Œå¦‚å›¾æ‰€ç¤ºã€‚


![image](https://img2024.cnblogs.com/blog/1423484/202409/1423484-20240928172308831-859359704.png)


# æ€»ç»“


åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨ Flask å’Œ Pickle å°†ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹æˆåŠŸé›†æˆåˆ° Web åº”ç”¨ä¸­ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡å‹å¥½çš„ç•Œé¢è¿›è¡Œé¢„æµ‹ã€‚è¿™ä¸€è¿‡ç¨‹ä¸ä»…è®©æˆ‘ä»¬ä½“éªŒåˆ°äº†æ¨¡å‹è®­ç»ƒä¸æ•°æ®é¢„å¤„ç†çš„ç»†èŠ‚ï¼Œä¹Ÿæ·±åˆ»ç†è§£äº†å¦‚ä½•åœ¨å®é™…åº”ç”¨ä¸­å®ç°æœºå™¨å­¦ä¹ çš„åŠŸèƒ½ã€‚


é€šè¿‡è¿™ä¸€ç³»åˆ—çš„å®è·µæ“ä½œï¼Œæˆ‘ä»¬ä¸ä»…å·©å›ºäº†å¯¹å·¥å…·å’ŒæŠ€æœ¯çš„ç†è§£ï¼Œä¹Ÿæå‡äº†å°†ç†è®ºçŸ¥è¯†è½¬åŒ–ä¸ºå®é™…åº”ç”¨çš„èƒ½åŠ›ã€‚è¿™ä¸€è¿‡ç¨‹çš„é‡è¦æ€§åœ¨äºï¼Œå®ƒä¸ä»…æ˜¯å¯¹æˆ‘ä»¬æŠ€æœ¯èƒ½åŠ›çš„æŒ‘æˆ˜ï¼Œæ›´æ˜¯å¯¹è§£å†³å®é™…é—®é¢˜èƒ½åŠ›çš„åŸ¹å…»ã€‚




---


æˆ‘æ˜¯åŠªåŠ›çš„å°é›¨ï¼Œä¸€å Java æœåŠ¡ç«¯ç å†œï¼Œæ½œå¿ƒç ”ç©¶ç€ AI æŠ€æœ¯çš„å¥¥ç§˜ã€‚æˆ‘çƒ­çˆ±æŠ€æœ¯äº¤æµä¸åˆ†äº«ï¼Œå¯¹å¼€æºç¤¾åŒºå……æ»¡çƒ­æƒ…ã€‚åŒæ—¶ä¹Ÿæ˜¯ä¸€ä½è…¾è®¯äº‘åˆ›ä½œä¹‹æ˜Ÿã€é˜¿é‡Œäº‘ä¸“å®¶åšä¸»ã€åä¸ºäº‘äº‘äº«ä¸“å®¶ã€æ˜é‡‘ä¼˜ç§€ä½œè€…ã€‚


ğŸ’¡ æˆ‘å°†ä¸ååˆ†äº«æˆ‘åœ¨æŠ€æœ¯é“è·¯ä¸Šçš„ä¸ªäººæ¢ç´¢ä¸ç»éªŒï¼Œå¸Œæœ›èƒ½ä¸ºä½ çš„å­¦ä¹ ä¸æˆé•¿å¸¦æ¥ä¸€äº›å¯å‘ä¸å¸®åŠ©ã€‚


ğŸŒŸ æ¬¢è¿å…³æ³¨åŠªåŠ›çš„å°é›¨ï¼ğŸŒŸ


